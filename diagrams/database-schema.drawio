<mxfile host="app.diagrams.net" modified="2025-01-27T10:00:00.000Z" agent="5.0" etag="ghi789" version="24.7.17" type="device">
  <diagram name="Database Schema" id="database-schema">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="CertA Database Schema" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="300" height="40" as="geometry" />
        </mxCell>
        
        <!-- AspNetUsers Table -->
        <mxCell id="aspnet-users" value="AspNetUsers" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="200" height="280" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-id" value="Id (PK, string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="30" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-username" value="UserName (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="56" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-email" value="Email (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="82" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-firstname" value="FirstName (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="108" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-lastname" value="LastName (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="134" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-organization" value="Organization (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="160" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-createddate" value="CreatedDate (DateTime)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="186" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-isactive" value="IsActive (bool)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="212" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="aspnet-users-passwordhash" value="PasswordHash (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="aspnet-users">
          <mxGeometry y="238" width="200" height="26" as="geometry" />
        </mxCell>
        
        <!-- Certificates Table -->
        <mxCell id="certificates" value="Certificates" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="350" y="100" width="200" height="320" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-id" value="Id (PK, int)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="30" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-commonname" value="CommonName (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="56" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-subjectaltnames" value="SubjectAltNames (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="82" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-serialnumber" value="SerialNumber (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="108" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-issueddate" value="IssuedDate (DateTime)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="134" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-expirydate" value="ExpiryDate (DateTime)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="160" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-status" value="Status (enum)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="186" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-type" value="Type (enum)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="212" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-certificatepem" value="CertificatePem (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="238" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-publickeypem" value="PublicKeyPem (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="264" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-privatekeypem" value="PrivateKeyPem (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificates">
          <mxGeometry y="290" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="certificates-userid" value="UserId (FK, string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=1;" vertex="1" parent="certificates">
          <mxGeometry y="316" width="200" height="26" as="geometry" />
        </mxCell>
        
        <!-- CertificateAuthorities Table -->
        <mxCell id="certificate-authorities" value="CertificateAuthorities" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="650" y="100" width="200" height="300" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-id" value="Id (PK, int)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="30" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-name" value="Name (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="56" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-commonname" value="CommonName (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="82" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-organization" value="Organization (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="108" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-country" value="Country (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="134" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-state" value="State (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="160" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-locality" value="Locality (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="186" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-certificatepem" value="CertificatePem (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="212" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-privatekeypem" value="PrivateKeyPem (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="238" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-createddate" value="CreatedDate (DateTime)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="264" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-expirydate" value="ExpiryDate (DateTime)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="290" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="ca-isactive" value="IsActive (bool)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontStyle=1;" vertex="1" parent="certificate-authorities">
          <mxGeometry y="316" width="200" height="26" as="geometry" />
        </mxCell>
        
        <!-- DataProtectionKeys Table -->
        <mxCell id="data-protection-keys" value="DataProtectionKeys" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="50" y="450" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="dpk-id" value="Id (PK, int)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="data-protection-keys">
          <mxGeometry y="30" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="dpk-friendlyname" value="FriendlyName (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="data-protection-keys">
          <mxGeometry y="56" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="dpk-xml" value="Xml (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="data-protection-keys">
          <mxGeometry y="82" width="200" height="26" as="geometry" />
        </mxCell>
        
        <!-- Logs Table -->
        <mxCell id="logs" value="Logs" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="350" y="450" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="logs-id" value="Id (PK, int)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="logs">
          <mxGeometry y="30" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="logs-message" value="Message (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="logs">
          <mxGeometry y="56" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="logs-level" value="Level (string)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="logs">
          <mxGeometry y="82" width="200" height="26" as="geometry" />
        </mxCell>
        
        <mxCell id="logs-timestamp" value="Timestamp (DateTime)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="logs">
          <mxGeometry y="108" width="200" height="26" as="geometry" />
        </mxCell>
        
        <!-- Relationships -->
        <mxCell id="rel1" value="1:N" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#d6b656;" edge="1" parent="1" source="aspnet-users" target="certificates">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="260" y="240" as="sourcePoint" />
            <mxPoint x="350" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Constraints -->
        <mxCell id="constraint1" value="Unique Index:&#xa;IX_CertificateAuthorities_IsActive&#xa;WHERE IsActive = true" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;align=left;" vertex="1" parent="1">
          <mxGeometry x="900" y="200" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="constraint2" value="Foreign Key:&#xa;Certificates.UserId&#xa;â†’ AspNetUsers.Id&#xa;CASCADE DELETE" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;" vertex="1" parent="1">
          <mxGeometry x="900" y="280" width="200" height="80" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend" value="Table Types" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="600" width="100" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend1" value="Identity Tables" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="630" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend2" value="Application Tables" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="140" y="630" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend3" value="CA Tables" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="230" y="630" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend4" value="System Tables" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="320" y="630" width="80" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend5" value="Logging Tables" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="410" y="630" width="80" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
